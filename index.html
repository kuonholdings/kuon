<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>KUON</title>
  <meta name="description" content="KUON" />

  <style>
    :root{
      --fg:#111;
      --bg:#fff;

      /* composition */
      --baseline:54vh;
      --gap:18px;
      --contact-gap:66px;
      --panel-gap:16px;
      --panel-stack-gap:14px;
      --langs-gap:22px;

      /* hard lock clock width to prevent drift */
      --clock-col: 560px; /* desktop */
      --optical-nudge: 0px; /* set to -1px if you want a tiny optical correction later */

      /* tone */
      --contact-body: rgba(0,0,0,0.52);
      --contact-body-2: rgba(0,0,0,0.56);
      --contact-body-3: rgba(0,0,0,0.48);
    }

    *{ box-sizing:border-box; }
    html, body{ height:100%; }
    body{
      margin:0;
      background:var(--bg);
      color:var(--fg);
      overflow:hidden;
      font-family:-apple-system, BlinkMacSystemFont, "Helvetica Neue", Helvetica, Arial, sans-serif;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .wrap{
      height:100%;
      width:100%;
      padding:56px 64px;
      position:relative;
    }

    /* Top-right editorial hairline rule + tick */
    .top-rule{
      position:fixed;
      top:20px;
      right:64px;
      width:72px;
      height:1px;
      background:rgba(0,0,0,0.12);
      z-index:2;
      pointer-events:none;
    }
    .top-rule span{
      position:absolute;
      right:0;
      top:-3px;
      width:1px;
      height:7px;
      background:rgba(0,0,0,0.10);
    }

    .center{
      position:absolute;
      left:50%;
      top:calc(var(--baseline) + 2px);
      transform:translate(-50%, -50%);
      text-align:center;
      width:min(980px, calc(100% - 40px));
    }

    /* ✅ Statement: flex wrapper centers the whole block */
    .statementWrap{
      display:flex;
      justify-content:center;
      width:100%;
    }

    /* ✅ Statement: inline-grid sized to content, with fixed clock column */
    .statement{
      display:inline-grid;
      grid-auto-flow:column;
      grid-template-columns: auto var(--clock-col);
      column-gap: var(--gap);
      align-items:baseline;
      white-space:nowrap;
      transform: translateX(var(--optical-nudge));
    }

    .logo{
      margin:0;
      font-weight:700;
      letter-spacing:0.30em;
      font-size:50px;
      line-height:1;
      padding-left:0.30em; /* keeps letterspacing optically centered */
      color:var(--fg);
    }

    .clock{
      width:var(--clock-col);
      text-align:center;

      font-weight:500;
      letter-spacing:0.14em;
      font-size:50px;
      line-height:1;

      /* deboss micro-contrast */
      color:rgba(0,0,0,0.055);
      text-shadow:
        0 -1px 0 rgba(0,0,0,0.03),
        0  1px 1px rgba(255,255,255,0.62);

      user-select:none;
      transition: opacity 220ms ease;

      font-variant-numeric: tabular-nums;
      font-feature-settings: "tnum" 1, "lnum" 1;
    }
    .clock.is-switching{ opacity:0.55; }

    .contactRow{ margin-top:var(--contact-gap); }

    .contact{
      display:inline-flex;
      align-items:center;
      gap:10px;

      border:0;
      background:transparent;
      padding:6px 10px;
      cursor:pointer;

      color:rgba(0,0,0,0.46);
      font-weight:400;
      letter-spacing:0.24em;
      font-size:11px;
      text-transform:uppercase;
    }

    .contact .arrow{
      font-size:14px;
      line-height:1;
      display:inline-block;
      transform: translateX(0) translateY(-1px);
      transition: transform 180ms ease;
      color:inherit;
    }

    .contact:hover{ color:var(--fg); }
    .contact:hover .arrow{ transform: translateX(3px) translateY(-1px); }

    .contact:focus-visible{
      outline:2px solid rgba(0,0,0,0.18);
      outline-offset:6px;
      border-radius:10px;
    }

    .panel{
      margin-top:var(--panel-gap);
      display:grid;
      gap:var(--panel-stack-gap);
      justify-items:center;

      width:min(560px, 100%);
      margin-left:auto;
      margin-right:auto;
      text-align:center;

      opacity:0;
      transform:translateY(6px);
      pointer-events:none;
      transition: opacity 220ms ease, transform 220ms ease;
    }
    .panel.is-open{
      opacity:1;
      transform:translateY(0);
      pointer-events:auto;
    }

    .descriptor{
      font-size:11px;
      letter-spacing:0.12em;
      color:var(--contact-body);
      max-width:58ch;
      line-height:1.7;

      min-height:3.4em; /* lock to two lines */
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;

      transition: opacity 180ms ease;
    }
    .descriptor.is-switching{ opacity:0.65; }

    .email{
      font-size:12px;
      letter-spacing:0.14em;
      text-transform:none;
      color:var(--contact-body-2);
      text-decoration:none;
      padding:4px 10px;
      transition: color 160ms ease;
    }
    .email:hover{ color:var(--fg); }

    .langs{
      margin-top:var(--langs-gap);
      display:flex;
      align-items:center;
      justify-content:center;
      gap:7px;
      flex-wrap:wrap;
    }

    .lang{
      background:transparent;
      border:0;
      padding:4px 4px;
      cursor:pointer;

      color:var(--contact-body-3);
      font-weight:400;
      letter-spacing:0.13em;
      font-size:11px;
      text-transform:uppercase;
      white-space:nowrap;
      transition: color 160ms ease;
    }
    .lang:hover{ color:var(--fg); }
    .lang[aria-current="true"]{ color:rgba(0,0,0,0.68); }

    .vsep{
      width:1px;
      height:11px;
      background:rgba(0,0,0,0.13);
      transform: translateY(1px);
      user-select:none;
    }

    .bottom{
      position:fixed;
      left:0; right:0;
      bottom:20px;
      padding:0 64px;
      display:flex;
      justify-content:space-between;
      align-items:flex-end;
      gap:24px;
      pointer-events:none;
    }

    .bottom .left,
    .bottom .right{
      font-size:11px;
      letter-spacing:0.14em;
      color:rgba(0,0,0,0.22);
      line-height:1.6;
      white-space:nowrap;
      text-transform:uppercase;
    }
    .bottom .right{ text-align:right; }

    @media (max-width: 720px){
      .wrap{ padding:40px 22px; }
      .bottom{ padding:0 22px; }

      :root{
        --gap:14px;
        --contact-gap:62px;
        --langs-gap:18px;
        --clock-col: 420px; /* mobile */
        --optical-nudge: 0px;
      }

      .top-rule{ right:22px; top:18px; width:54px; }
      .logo{ font-size:42px; }
      .clock{ font-size:42px; width:var(--clock-col); }
      .bottom .left, .bottom .right{ white-space:normal; }
      .vsep{ height:10px; }
    }

    /* very narrow screens: let statement compress */
    @media (max-width: 680px){
      :root{ --clock-col: 320px; }
      .statement{ grid-template-columns: auto var(--clock-col); }
    }
  </style>
</head>

<body>
  <div class="top-rule" aria-hidden="true"><span></span></div>

  <div class="wrap">
    <main class="center" aria-label="KUON">
      <div class="statementWrap">
        <div class="statement" aria-label="KUON and clock">
          <h1 class="logo">KUON</h1>
          <div class="clock" id="clock">—</div>
        </div>
      </div>

      <div class="contactRow">
        <button class="contact" id="contactBtn" type="button" aria-expanded="false" aria-controls="panel">
          <span id="contactLabel">contact</span>
          <span class="arrow" id="contactArrow" aria-hidden="true">→</span>
        </button>

        <div class="panel" id="panel" aria-label="Contact panel">
          <div class="descriptor" id="descriptor">
            KUON holds work intended to last — across design, sound, and structure.
          </div>

          <a class="email" href="mailto:info@kuonholdings.com">info@kuonholdings.com</a>

          <div class="langs" aria-label="Languages">
            <button class="lang" type="button" data-lang="en" aria-current="true">ENGLISH</button>
            <span class="vsep" aria-hidden="true"></span>
            <button class="lang" type="button" data-lang="ja">JAPANESE</button>
            <span class="vsep" aria-hidden="true"></span>
            <button class="lang" type="button" data-lang="zh">CHINESE</button>
          </div>
        </div>
      </div>
    </main>
  </div>

  <footer class="bottom" aria-label="Footer info">
    <div class="left">KUON HOLDINGS</div>
    <div class="right">TOKYO / LONDON</div>
  </footer>

  <script>
    const CONTENT = {
      en: {
        htmlLang: "en",
        tz: "UTC",
        tzLabel: "UTC",
        descriptor: "KUON holds work intended to last — across design, sound, and structure."
      },
      ja: {
        htmlLang: "ja",
        tz: "Asia/Tokyo",
        tzLabel: "JPN",
        descriptor: "KUONは、長く残ることを意図した仕事を保有します――デザイン、音、構造にわたって。"
      },
      zh: {
        htmlLang: "zh",
        tz: "Asia/Shanghai",
        tzLabel: "CHN",
        descriptor: "KUON 持有旨在长久延续的工作——涵盖设计、声音与结构。"
      }
    };

    let currentLang = "en";

    const clockEl = document.getElementById("clock");
    const descriptorEl = document.getElementById("descriptor");

    function partsForTZ(date, timeZone){
      const fmt = new Intl.DateTimeFormat("en-GB", {
        timeZone,
        year: "numeric",
        month: "2-digit",
        day: "2-digit",
        hour: "2-digit",
        minute: "2-digit",
        hour12: false
      });

      const parts = fmt.formatToParts(date);
      const get = (type) => parts.find(p => p.type === type)?.value || "";
      return {
        Y: get("year"),
        M: get("month"),
        D: get("day"),
        h: get("hour"),
        m: get("minute")
      };
    }

    function formatInTZ(date, langKey){
      const { tz, tzLabel } = CONTENT[langKey];
      const p = partsForTZ(date, tz);
      return `${p.Y}.${p.M}.${p.D} ${p.h}:${p.m} ${tzLabel}`;
    }

    function tick(){
      clockEl.textContent = formatInTZ(new Date(), currentLang);
    }

    tick();
    setInterval(tick, 1000 * 10);

    function setLanguage(langKey){
      if (!CONTENT[langKey]) return;
      if (langKey === currentLang) return;

      clockEl.classList.add("is-switching");
      descriptorEl.classList.add("is-switching");

      currentLang = langKey;
      document.documentElement.setAttribute("lang", CONTENT[langKey].htmlLang);

      setTimeout(() => {
        descriptorEl.textContent = CONTENT[langKey].descriptor;
        tick();
      }, 80);

      setTimeout(() => {
        clockEl.classList.remove("is-switching");
        descriptorEl.classList.remove("is-switching");
      }, 180);
    }

    const contactBtn = document.getElementById("contactBtn");
    const contactLabel = document.getElementById("contactLabel");
    const contactArrow = document.getElementById("contactArrow");
    const panel = document.getElementById("panel");

    let open = false;
    function setOpen(v){
      open = v;
      panel.classList.toggle("is-open", open);
      contactBtn.setAttribute("aria-expanded", String(open));
      contactLabel.textContent = open ? "back" : "contact";
      contactArrow.textContent = open ? "←" : "→";
    }
    contactBtn.addEventListener("click", () => setOpen(!open));

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && open){
        setOpen(false);
        contactBtn.focus();
      }
    });

    const langButtons = Array.from(document.querySelectorAll(".lang"));
    langButtons.forEach(btn => {
      btn.addEventListener("click", () => {
        const lang = btn.dataset.lang;
        langButtons.forEach(b => b.removeAttribute("aria-current"));
        btn.setAttribute("aria-current", "true");
        setLanguage(lang);
      });
    });
  </script>
</body>
</html>
